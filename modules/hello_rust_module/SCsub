Import('env')
import os

os.system("cargo build --release")
Command("lib/hello_rust_module.windows.tools.64.lib", "target/release/hello_rust_module.lib", Copy("$TARGET", "$SOURCE"))

env_rust = env.Clone()

env_rust.Append(CPPPATH=["include"])
env.Append(LIBPATH=['#modules/hello_rust_module/lib'])
env.Append(LIBS=['hello_rust_module'])
env_rust.add_source_files(env.modules_sources, "*.cpp")